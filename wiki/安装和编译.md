# 编译
## 下载安装PX4固件（for仿真）

- 目前阶段，建议使用amov固件

- 参考网址：https://github.com/amov-lab/Prometheus/wiki/%E4%BB%BF%E7%9C%9F%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE

- 测试：

```bash
make amovlab_sitl_default gazebo
```



## 下载安装quadrotor

- 编译

    catkit build
注：先编译msg文件，才能全部编译通过。



## 配置环境变量

- 设置quadrotor路径

  ```bash
  source /home/ly/px4/quadrotor/devel/setup.bash
  export GAZEBO_PLUGIN_PATH=$GAZEBO_PLUGIN_PATH:/home/ly/px4/quadrotor/devel/lib
  export GAZEBO_MODEL_PATH=$GAZEBO_MODEL_PATH:/home/ly/px4/quadrotor/src/Simulator/gazebo_simulator/models
  export GAZEBO_MODEL_PATH=$GAZEBO_MODEL_PATH:/home/ly/px4/quadrotor/src/Simulator/gazebo_simulator/amov_models
  ```

- 设置px4固件路径

  ```bash
  source /home/ly/px4/prometheus_px4/Tools/setup_gazebo.bash /home/ly/px4/prometheus_px4 /home/ly/px4/prometheus_px4/build/amovlab_sitl_default
  export ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:/home/ly/px4/prometheus_px4
  export ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:/home/ly/px4/prometheus_px4/Tools/sitl_gazebo
  ```

注：在.bashrc中，先设置quadrotor路径，再设置px4固件路径。原因未知。