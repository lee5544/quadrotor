# quadrotor

## 设计框架

<img src="/image/程序设计.jpg" alt="程序设计" style="zoom:25%;" />

**设计理念**

- 隔离应用设计和具体的飞控程序；
- 将无人机指令划分成高层指令和底层指令，简化任务设计。
  - 高层指令包括起飞、降落、移动等等；底层指令是具体的期望位置、姿态等等；
  - 设计单独的程序，将高级指令解析成具体的底层指令。

## px4_bridge

px4_bridge模块负责连接px4飞控和应用app，设计目的是封装飞控，使得开发app仅仅只要知道接口。

- 功能
  - 从飞控中读取无人机状态和位姿，封装至消息prometheus_msgs::DroneState
  - 解析无人机高层指令，发送底层指令

- 节点

  - CommandToFcu

  - StatesFromFcu

  - StatesToFcu

    

注：本功能模块，需要结合具体的飞控（px4），提升解析和执行高级指令的效果。

## mission

mission模块负责针对具体飞行任务，统筹感知和规划算法的调度。

- 根据当前情况，决定发送何种高级指令
- ……
- 节点
  - missionSample：设计模板

## planning

planning模块负责根据目标点计算出需要执行的轨迹点。

- 接收mission模块的目标点，生成可执行的轨迹，并发布出去。
- fastplanner

## perception

perception模块负责感知深度和提供其他信息。


